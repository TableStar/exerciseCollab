<script>
  //SPEC 2: EXPENCE TRACKER
  //Main feature : 
  //Menambah data, yang perlu disimpan :
  //id
  //type : income / expence
  //nominal
  //note
  //date (format : “yyyy-mm-dd”)
  class  Data{
    constructor() {
      this.transaksi = [];
      this.saldo = 0;
    }

    tambahTransaksi() {
      const id = new Date().getTime();
      const type = prompt('Masukkan Transaksi anda (pemasukan/pengeluaran):');
      const nominal = parseFloat(prompt('Masukkan Nominal:'));
      const note = prompt('Masukkan Catatan:');
      const date = prompt('Masukkan Tanggal Transaksi (yyyy-mm-dd):');

      if (isNaN(nominal) || type != 'pemasukan' && type != 'pengeluaran') {
        alert('Pengisian salah. Coba lagi');
        return;
      }

      const dataTransaksi = {
        id,
        type,
        nominal,
        note,
        date,
      };

      this.transaksi.push(dataTransaksi);
      this.infoSaldo();
      alert('Transaksi Berhasil.');
    }
    
    //Menampilkan data pengeluaran dan pemasukan dan menampilkan sisa uang terakhir
    lihatTransaksi() {
      this.transaksi.forEach((transaction) => {
        alert((`ID: ${transaction.id}, Anda melakukan : ${transaction.type}, Dengan Nominal: ${transaction.nominal.toLocaleString("id")}, Catatan: ${transaction.note}, Pada: ${transaction.date}`));
      });
      alert(`Saldo anda adalah: ${this.saldo.toLocaleString("id")}`);
    }

    hapusTransaksi() {
      const hapusId = parseInt(prompt('Masukkan ID yang ingin dihapus:'));
      const hapusIndex = this.transaksi.findIndex((dataTransaksi) => dataTransaksi.id === hapusId);

      if (hapusIndex === -1) {
        alert('ID tidak Ditemukan. Coba lagi!');
        return;
      }

      const confirmDelete = confirm('Apakah anda ingin menghapus data transaksi?');

      if (confirmDelete) {
        this.transaksi.splice(hapusIndex, 1);
        this.infoSaldo();
        alert('Transaksi berhasil di hapus.');
      }
    }
    
    infoSaldo() {
      this.saldo = this.transaksi.reduce((total, transaction) => {
        if (transaction.type === 'pemasukan') {
          return total + transaction.nominal;
        } else {
          return total - transaction.nominal;
        }
      }, 0);
    }

    mulaiTransaksi() {
      while (true) {
        
        const choice = prompt(
          'Pilih Menu:\n1. Tambah Saldo\n2. Lihat Saldo\n3. Hapus Saldo\n4. Keluar Aplikasi'
        );

        switch (choice) {
          case '1':
            this.tambahTransaksi();
            break;
            case '2':
              //Menampilkan data pengeluaran dan pemasukan dan menampilkan sisa uang terakhir
              this.lihatTransaksi();
              break;
              case '3':
            //Menampilkan data berdasarkan rentang tanggal mulai dan akhir yang diberikan
            //Memperbarui data, yang bisa diperbarui :
            //nominal
            //note
            //date
            //Menghapus data yang dipilih 
            this.hapusTransaksi();
            break;
          case '4':
            if (confirm('Apakah yakin keluar Aplikasi?')) {
              alert('Terima Kasih Sudah menggunakan Aplikasi.');
              return;
            }
            break;
          default:
            alert('Invalid choice. Please try again.');
        }
      }
    }
  }

  const go = new Data();
  go.mulaiTransaksi();
    


</script>